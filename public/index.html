<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To do list</title>
    <link rel="shortcut icon" href="https://www.flaticon.com/svg/static/icons/svg/1617/1617614.svg" type="image/x-icon" >

    <link rel="stylesheet" type="text/css" href="stylesheets/todo.css">
  </head>

<body onload="loadList()">

<h1>To do</h1>

<ol id="list">

</ol>

<form id="todo" method="GET" action="/update">
  <button onclick="return false;">Create a new todo item</button>
</form>


<script>
  function loadList() { 
    var xmlHttpRequest = new XMLHttpRequest();
    xmlHttpRequest.onreadystatechange = function() { 
      if (xmlHttpRequest.readyState == XMLHttpRequest.DONE && xmlHttpRequest.status == 200 ) {
        console.log('getting database request');

        var database = JSON.parse(xmlHttpRequest.responseText);
        console.log(database);
        var list = document.getElementById('list');

        for (var i = 1; i < database.todo.length; i++) { 
          var item = document.createElement('li');
          item.innerHTML = database.todo[i].item;
          list.appendChild(item);
        }

      }
    }
    xmlHttpRequest.open('GET', 'https://nates-notes.herokuapp.com/todo', true);
    xmlHttpRequest.send();
  };
</script>


</body>
</html>